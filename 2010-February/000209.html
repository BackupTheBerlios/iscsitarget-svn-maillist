<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Iscsitarget-svn] SF.net SVN: iscsitarget:[297]	trunk/kernel/nthread.c
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/iscsitarget-svn/2010-February/index.html" >
   <LINK REL="made" HREF="mailto:iscsitarget-svn%40lists.berlios.de?Subject=Re%3A%20%5BIscsitarget-svn%5D%20SF.net%20SVN%3A%20iscsitarget%3A%5B297%5D%0A%09trunk/kernel/nthread.c&In-Reply-To=%3CE1NjwU9-000794-PN%40sfp-svn-4.v30.ch3.sourceforge.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000208.html">
   <LINK REL="Next"  HREF="000210.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Iscsitarget-svn] SF.net SVN: iscsitarget:[297]	trunk/kernel/nthread.c</H1>
    <B>rswwalker at users.sourceforge.net</B> 
    <A HREF="mailto:iscsitarget-svn%40lists.berlios.de?Subject=Re%3A%20%5BIscsitarget-svn%5D%20SF.net%20SVN%3A%20iscsitarget%3A%5B297%5D%0A%09trunk/kernel/nthread.c&In-Reply-To=%3CE1NjwU9-000794-PN%40sfp-svn-4.v30.ch3.sourceforge.com%3E"
       TITLE="[Iscsitarget-svn] SF.net SVN: iscsitarget:[297]	trunk/kernel/nthread.c">rswwalker at users.sourceforge.net
       </A><BR>
    <I>Tue Feb 23 16:15:41 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="000208.html">[Iscsitarget-svn] SF.net SVN: iscsitarget:[296] trunk/kernel/iscsi.c
</A></li>
        <LI>Next message: <A HREF="000210.html">[Iscsitarget-svn] SF.net SVN: iscsitarget:[298]	trunk/kernel/nthread.c
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#209">[ date ]</a>
              <a href="thread.html#209">[ thread ]</a>
              <a href="subject.html#209">[ subject ]</a>
              <a href="author.html#209">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Revision: 297
          <A HREF="http://iscsitarget.svn.sourceforge.net/iscsitarget/?rev=297&amp;view=rev">http://iscsitarget.svn.sourceforge.net/iscsitarget/?rev=297&amp;view=rev</A>
Author:   rswwalker
Date:     2010-02-23 15:15:41 +0000 (Tue, 23 Feb 2010)

Log Message:
-----------
The recv() and send() functions in nthread return zero on
successful completion instead of the number of bytes sent or
received which isn't typical of comm functions and isn't what the
NOP-In code expects.

Compile tested on RHEL5

Signed-off-by: Ross Walker

Modified Paths:
--------------
    trunk/kernel/nthread.c

Modified: trunk/kernel/nthread.c
===================================================================
--- trunk/kernel/nthread.c	2010-02-23 15:08:00 UTC (rev 296)
+++ trunk/kernel/nthread.c	2010-02-23 15:15:41 UTC (rev 297)
@@ -287,7 +287,7 @@
 	conn-&gt;read_cmnd = NULL;
 	conn-&gt;read_state = RX_INIT_BHS;
 
-	return 0;
+	return res;
 }
 
 /*
@@ -566,7 +566,7 @@
 	conn-&gt;write_cmnd = NULL;
 	conn-&gt;write_state = TX_INIT;
 
-	return 0;
+	return res;
 }
 
 static void conn_nop_timeout(unsigned long data)


This was sent by the SourceForge.net collaborative development platform, the world's largest Open Source development site.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000208.html">[Iscsitarget-svn] SF.net SVN: iscsitarget:[296] trunk/kernel/iscsi.c
</A></li>
	<LI>Next message: <A HREF="000210.html">[Iscsitarget-svn] SF.net SVN: iscsitarget:[298]	trunk/kernel/nthread.c
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#209">[ date ]</a>
              <a href="thread.html#209">[ thread ]</a>
              <a href="subject.html#209">[ subject ]</a>
              <a href="author.html#209">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/iscsitarget-svn">More information about the Iscsitarget-svn
mailing list</a><br>
</body></html>
